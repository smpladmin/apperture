import json


def test_capture_click_stream(client_init, datasource_service, clickstream_service):
    encoded = "eyJldmVudCI6IiRwYWdldmlldyIsInByb3BlcnRpZXMiOnsiJG9zIjoiTWFjIE9TIFgiLCIkYnJvd3NlciI6IkNocm9tZSIsIiRkZXZpY2VfdHlwZSI6IkRlc2t0b3AiLCIkY3VycmVudF91cmwiOiJodHRwOi8vbG9jYWxob3N0OjMwMDAvYW5hbHl0aWNzL2V4cGxvcmUvNjNkOGVmNWE3YjAyZGJkMWRjZjIwZGNjIiwiJGhvc3QiOiJsb2NhbGhvc3Q6MzAwMCIsIiRwYXRobmFtZSI6Ii9hbmFseXRpY3MvZXhwbG9yZS82M2Q4ZWY1YTdiMDJkYmQxZGNmMjBkY2MiLCIkYnJvd3Nlcl92ZXJzaW9uIjoxMDksIiRicm93c2VyX2xhbmd1YWdlIjoiZW4tR0IiLCIkc2NyZWVuX2hlaWdodCI6OTgyLCIkc2NyZWVuX3dpZHRoIjoxNTEyLCIkdmlld3BvcnRfaGVpZ2h0IjoyNjQsIiR2aWV3cG9ydF93aWR0aCI6MTUxMiwiJGxpYiI6IndlYiIsIiRsaWJfdmVyc2lvbiI6IjEuNDIuMyIsIiRpbnNlcnRfaWQiOiJmbHJzazM5ZW02Y29wdnhlIiwiJHRpbWUiOjE2NzU3Njg4MjUuMDEsImRpc3RpbmN0X2lkIjoiMTg2MmE5ZTUyMTIxYTM3LTBiMzliOTQ5OGQ4YzU0LTE2NTI1NjM1LTE2YTdmMC0xODYyYTllNTIxMzI4ZmEiLCIkZGV2aWNlX2lkIjoiMTg2MmE5ZTUyMTIxYTM3LTBiMzliOTQ5OGQ4YzU0LTE2NTI1NjM1LTE2YTdmMC0xODYyYTllNTIxMzI4ZmEiLCIkcmVmZXJyZXIiOiIkZGlyZWN0IiwiJHJlZmVycmluZ19kb21haW4iOiIkZGlyZWN0IiwidG9rZW4iOiI2M2Q4ZWY1YTdiMDJkYmQxZGNmMjBkY2MiLCIkc2Vzc2lvbl9pZCI6IjE4NjJiOWFmYjg2YmYxLTBlOGIyMGU1NjI4NWUtMTY1MjU2MzUtMTZhN2YwLTE4NjJiOWFmYjg3Njk5IiwiJHdpbmRvd19pZCI6IjE4NjJiOWFmYjg4MmRlNC0wNGQ4ZWI2NmY5OWI3OS0xNjUyNTYzNS0xNmE3ZjAtMTg2MmI5YWZiODkyNDRmIiwiJHBhZ2V2aWV3X2lkIjoiMTg2MmI5YjA0YjMyMzY4LTA5YTdiZDRkMjdlMWJiLTE2NTI1NjM1LTE2YTdmMC0xODYyYjliMDRiNDIxZDIifSwidGltZXN0YW1wIjoiMjAyMy0wMi0wN1QxMToyMDoyNS4wMTNaIn0="
    response = client_init.post(
        "/events/capture/e/?ip=1&_=1675765206748&ver=1.42.3",
        data={"data": str(encoded)},
    )

    assert response.status_code == 200
